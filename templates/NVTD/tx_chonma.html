{% load static %}
{% load filter %}
<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet">

    <title>Ramayana - Free Bootstrap 4 CSS Template</title>

    <!-- Bootstrap core CSS -->
    <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">

<!--
Ramayana CSS Template
https://templatemo.com/tm-529-ramayana
-->

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="{% static 'assets/css/fontawesome.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/templatemo-style.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/owl.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/shortcodes.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,700">
    <style>/* The alert message box */
.alert {
  padding: 20px;
  background-color: #f44336; /* Red */
  color: white;
  margin-bottom: 15px;
}

/* The close button */
.closebtn {
  margin-left: 15px;
  color: white;
  font-weight: bold;
  float: right;
  font-size: 22px;
  line-height: 20px;
  cursor: pointer;
  transition: 0.3s;
}

/* When moving the mouse over the close button */
.closebtn:hover {
  color: black;
}</style>


  </head>

<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

      <!-- Main -->
        <div id="main">
          <div class="inner">

            <!-- Header -->
            <header id="header" style="margin: -100px -100px 50px -100px;">
              <div class="logo">
                <div class="btn-group mb-2 mr-2">
                  <a style="font-size: 15px;"> Xin chào! </a>
                </div>
              </div>
            </header>
<!-- Alert -->
<!--            <div class="alert">-->
<!--                <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>-->
<!--                    This is an alert box.-->
<!--            </div>-->

            <!-- Breadcrumb -->

            <!-- Thêm lộ trình-->
            <section class="forms" style="border-bottom: none;">
              <div class="container-fluid">
                <div class="row">
                  <div class="col-md-12">
                    <div class="section-heading">
                      <h2 id="chitiet">Thêm lộ trình</h2>
                    </div>
                    <form id="contact" method="GET">
                      {% csrf_token %}
                      <div class="row">
                        <div class="col-md-9">
                          <fieldset id = 'input_mt'>
                            <input type="text" name="mt" id = "mt" class="form-control" placeholder="Mã tuyến (Trạm đầu - Trạm cuối)" required="">
                          </fieldset>
                        </div>
                        <div class="col-md-3">
                            <a href="../../route" style="font-size: 14px;" id="chon" href="#">Sử dụng Mã tuyến có sẵn</a>
                        </div>

                        <div class="col-md-2">
                          <fieldset>
                            <input type="text" name="t1" class="form-control" placeholder="Tuyến" required="" disabled>
                          </fieldset>
                        </div>
                        <div class="col-md-9" id="dstd">
                          <div class="col-md-4" style="float: left;">
                            <select id="sel" name="1" required="required">
                              <option name="" value="0">--Chọn đường số 1--</option>
                              {% for d in ds_duong %}
                              <option value="{{d.TenDuong}}">{{d.TenDuong}}</option>
                              {% endfor %}
                            </select>
                          </div>
                        </div>
                        <input type="text" id ="laygt" name="laygt" value="1" style="display: none;" class="form-control" placeholder="">
                        <div class="col-md-1">
                          <button formaction="" type="button" class="button" onclick="myFunction()"><i style="font-family: 'FontAwesome'; font-style: normal" class="fa-plus"></i></button>
                        </div>
                        <div class="col-md-12">
                          <fieldset>
                            <input type="time" name="tgxb" class="form-control" placeholder="Xuất bến" required="">
                          </fieldset>
                        </div>
                        <div class="col-md-12">
                          <fieldset>
                            <input type="time" name="tgdb" class="form-control" placeholder="Đến bến" required="">
                          </fieldset>
                        </div>
                        <div class="col-md-12">
                          <fieldset>
                            <input type="text" name="giave" class="form-control" placeholder="Giá vé" required="">
                          </fieldset>
                        </div>
                        <div class="col-md-12">
                          <button formaction="../../route/selected/add" type="submit"  class="button">Thêm</button>
                        </div>
                        <div class="col-md-12" style="padding-top: 10px;"><a style="color: {{color}};">{{m}}</a></div>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>

      <!-- Sidebar -->
        <div id="sidebar">

          <div class="inner">

            <!-- Search Box -->
            <section id="search" class="alt">
              <img src="{% static 'assets/images/bus.png' %}" style="width: 50%; height: 100%; padding-left: 60px;" alt="">
            </section>
              
            <!-- Menu -->
           <nav id="menu">
              <ul>
                <li>
                  <span class="opener">Thông tin cá nhân</span>
                  <ul>
                    <li><a href="../../usr/information"><i style="font-family: 'FontAwesome'; font-style: normal;" class="fa-edit"></i>  Cập nhật thông tin </a></li>
                    <li><a href="../../usr/changepassword"><i style="font-family: 'FontAwesome'; font-style: normal" class="fa-key"></i>  Thay đổi mật khẩu </a></li>
                  </ul>
                </li>
                <li>
                  <span class="opener">Tuyến đường</span>
                  <ul>
                    <li><a href="../../city_route"><i style="font-family: 'FontAwesome'; font-style: normal" class="fa-plus"></i>  Thêm tuyến mới </a></li>
                    <li><a href="../../city_route/information"><i style="font-family: 'FontAwesome'; font-style: normal" class="fa-edit"></i>  Cập nhật tuyến đường </a></li>
                  </ul>
                </li>
                <li>
                  <span class="opener active">Lộ trình</span>
                  <ul>
                    <li><a href="../../bus_routes"><i style="font-family: 'FontAwesome'; font-style: normal" class="fa-plus"></i>  Danh sách tuyến xe </a></li>
                    <li><a href="#" style="color: #535ba0;"><i style="font-family: 'FontAwesome'; font-style: normal" class="fa-plus"></i>  Thêm lộ trình </a></li>
                    <li><a href="../../route/information"><i style="font-family: 'FontAwesome'; font-style: normal" class="fa-edit"></i>  Cập nhật lộ trình </a></li>
                  </ul>
                </li>
                <li>
                  <span class="opener">Xe buýt</span>
                  <ul>
                    <li><a href="../../nvtd/bus"><i style="font-family: 'FontAwesome'; font-style: normal" class="fa-plus"></i>  Thêm mới </a></li>
                    <li><a href="../../nvtd/bus_inf"><i style="font-family: 'FontAwesome'; font-style: normal" class="fa-edit"></i>  Cập nhật </a></li>
                  </ul>
                </li>
                <li><a href="../../fhwflhwdklfhwqplfijepoqf9u4038586885889882wdnadakdD872182CMMFKFKFOKFLASIUOVBJHFJ">Đăng xuất</a></li>
              </ul>
            </nav>

            <!-- Featured Posts -->
            <div class="featured-posts">
              <div class="heading">
                <h2>Featured Posts</h2>
              </div>
              <div class="owl-carousel owl-theme">
                <a href="#">
                  <div class="featured-item">
                    <img src="{% static 'assets/images/featured_post_01.jpg' %}" alt="featured one">
                    <p>Aliquam egestas convallis eros sed gravida. Curabitur consequat sit.</p>
                  </div>
                </a>
                <a href="#">
                  <div class="featured-item">
                    <img src="{% static 'assets/images/featured_post_01.jpg' %}" alt="featured two">
                    <p>Donec a scelerisque massa. Aliquam non iaculis quam. Duis arcu turpis.</p>
                  </div>
                </a>
                <a href="#">
                  <div class="featured-item">
                    <img src="{% static 'assets/images/featured_post_01.jpg' %}" alt="featured three">
                    <p>Suspendisse ac convallis urna, vitae luctus ante. Donec sit amet.</p>
                  </div>
                </a>
              </div>
            </div>

            <!-- Footer -->
            <footer id="footer">
              <p class="copyright">Copyright &copy; 2019 Company Name
              <br>Designed by <a rel="nofollow" href="https://www.facebook.com/templatemo">Template Mo</a></p>
            </footer>
            
          </div>
        </div>

    </div>

  <!-- Scripts -->
  <!-- Bootstrap core JavaScript -->
    <script src="{% static 'vendor/jquery/jquery.min.js' %}"></script>
    <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>

    <script src="{% static 'assets/js/browser.min.js' %}"></script>
    <script src="{% static 'assets/js/breakpoints.min.js' %}"></script>
    <script src="{% static 'assets/js/transition.js' %}"></script>
    <script src="{% static 'assets/js/owl-carousel.js' %}"></script>
    <script src="{% static 'assets/js/custom.js' %}"></script>
    <script>
      function SuDungMT() {
         var input_mt = document.getElementById('input_mt');
         var sel_mt = document.getElementById('sel_mt');
         if (input_mt.style.display != 'none') {
            input_mt.style.display = 'none';
            sel_mt.style.display = 'block';
         } else {
            input_mt.style.display = 'block';
            sel_mt.style.display = 'none';
         }

         var chon = document.getElementById('chon');
         if (chon.innerHTML == 'Sử dụng Mã tuyến có sẵn') {
            chon.innerHTML = 'Thêm Mã tuyến mới'
         } else {
            chon.innerHTML = 'Sử dụng Mã tuyến có sẵn'
         }


      }
    </script>
    <script>
    var stt = 2;


    function myFunction() {
      var node = document.getElementById('dstd');
      var div = document.createElement('div');
      div.classList.add('col-md-4');
      div.style.float = 'left';

      var tong = node.getElementsByTagName('div').length;

      if (tong <=5){
         var select3 = document.createElement("select");
         let opt = document.getElementsByTagName("option");
         let select = document.getElementById("sel");
         var h = select.getElementsByTagName("option").length;
         let dd = document.getElementById("dd");
         let laygt = document.getElementById("laygt");
         laygt.value = tong;

         for (var i = 0; i<=h-1; i++){
           var o = document.createElement("option");

           o.text = opt[i].text;
           if (i==0){
             select3.setAttribute("name",stt);
             select3.required = "required";
             o.text = '--Chọn đường số '+ stt + '--';
             o.value = 0;
             stt = stt + 1;
           }
           select3.appendChild(o)
         }
         div.appendChild(select3);
         node.appendChild(div);

      } else {
         alert('Số lượng đường đã vượt quá quy định!')
      }
    }
    </script>
    <script>
      $("#mt").change(function (){
         var mt = $(this).val();
         $.ajax({
               type: 'POST',
               url: "../../checkMT",
               data: {
                  'mt': mt
               },
               success: function (response) {
               if (response["kq"] == 1){
                    $("#mt").val("");
                    alert('Mã tuyến đã tồn tại!');
               }
               },
               error: function (response) {
                  console.log(response)
               }
        });
      });
    </script>

  </body>

</html>
